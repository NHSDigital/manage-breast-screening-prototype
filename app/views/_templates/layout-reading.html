{# app/views/_templates/layout-reading.html #}
{# Layout for reading pages - extends layout-app with reading-specific features #}

{% extends "layout-app.html" %}

{% set gridColumn = gridColumn or "nhsuk-grid-column-full" %}

{# Workflow mode adds status bar and workflow navigation #}
{# {% if isReadingWorkflow %}
  {% set mainClasses = "nhsuk-u-padding-top-3" %}
{% endif %} #}

{% block header %}
  {{ super() }}

  {# Show status bar only in workflow mode #}
  {% if isReadingWorkflow %}
    {% include "_includes/reading/reading-status-bar.njk" %}
  {% endif %}
{% endblock header %}

{% block beforeContent %}
  {% if isReadingWorkflow and showWorkflowNav %}
    {# Workflow navigation: prev/next case - only on main opinion page #}
    {% include "_includes/reading/workflow-navigation.njk" %}
  {% else %}
    {# Standard back link - can be hidden or customised per page #}
    {% if not hideBackLink %}
      {{ backLink({
        href: back.href or "javascript:history.back();",
        text: back.text or "Back"
      }) }}
    {% endif %}
  {% endif %}
{% endblock %}

{% block pageNavigation %}
  {# Override this block in pages that need custom navigation #}
{% endblock pageNavigation %}

{% block mammogramViewer %}
  {% if participant and data.settings.reading.showPacsViewer | falsify %}
    <!-- Meta tags to control mammogram viewer -->
    <meta name="mammogram-viewer" content="show">
    <meta name="participant-name" content="{{ participant | getFullName }}">
    <meta name="event-id" content="{{ eventId }}">
  {% else %}
    <!-- Default: mammogram viewer should be hidden -->
    <meta name="mammogram-viewer" content="hide">
  {% endif %}
{% endblock %}
