{# app/views/clinics/[clinicId]/events/[eventId]/medical-information/medical-history/consent.html #}

{% extends 'layout-app.html' %}

{% set pageHeading = "Request consent to continue" %}

{% set gridColumn = "nhsuk-grid-column-two-thirds" %}

{% set formAction = "./consent-answer" %}

{% block pageContent %}

  {% set unit = data.breastScreeningUnits | findById(clinic.breastScreeningUnitId) %}

  <h1 class="nhsuk-heading-xl">Request consent to continue</h1>

  <p>You must get the participant's permission to carry out a mammogram on breasts with implants.</p>

  <p>There is no medical reason for people with breast implants to avoid the procedure.</p>

  <h2 class="nhsuk-heading-m">Explain the risks</h2>

  <ul class="nhsuk-list nhsuk-list--bullet">
    <li>Very rarely, implants can rupture due to pressure during imaging</li>
    <li>Extra images may be needed to scan enough breast tissue, slightly increasing radiation exposure</li>
    <li>Implants make it harder to spot signs of cancer as they can obscure breast tissue</li>
  </ul>

  <div class="nhsuk-inset-text">
    <span class="nhsuk-u-visually-hidden">Information: </span>
    <p>If the participant notices any problems with their implants after the appointment, they should contact their GP.</p>
  </div>

  <h2 class="nhsuk-heading-m">Ask {{ participant.demographicInformation.firstName or "the participant" }} for consent</h2>

  <p>Once you've explained the process and the risks, ask them to read and complete your paper consent form.</p>

  {{ radios({
    name: "event[medicalInformation][implantedDevices][consentGiven]",
    value: event.medicalInformation.implantedDevices.consentGiven,
    fieldset: {
      legend: {
        text: "Have they signed the consent form?",
        classes: "nhsuk-fieldset__legend--s",
        isPageHeading: false
      }
    },
    items: [
      {
        value: "yes",
        text: "Yes"
      },
      {
        value: "no",
        text: "No, end the appointment",
        conditional: {
          html: '<div class="nhsuk-form-group">
            <label class="nhsuk-label" for="consent-details">
              Provide details (optional)
            </label>
            <textarea class="nhsuk-textarea" id="consent-details" name="event[medicalInformation][implantedDevices][consentDeclinedDetails]" rows="4">' + (event.medicalInformation.implantedDevices.consentDeclinedDetails or '') + '</textarea>
          </div>'
        }
      }
    ]
  }) }}

  {{ button({
    text: "Continue"
  }) }}

  {% include "screening-cannot-proceed-link.njk" %}

{% endblock %}