
{% extends 'layout-appointment.html' %}

{% set pageHeading = "Pregnancy and breastfeeding" %}

{% set gridColumn = "nhsuk-grid-column-two-thirds" %}

{% set formAction = "./../review-medical-information" | getReturnUrl(referrerChain, query.scrollTo) %}

{# {% set back = {
  href: "/clinics/" + clinicId,
  text: "Back to clinic"
} %}
 #}

{% block pageContent %}

  {% set unit = data.breastScreeningUnits | findById(clinic.breastScreeningUnitId) %}

  <h1 class="nhsuk-heading-l">
    <span class="nhsuk-caption-l">
      {{ participant | getFullName }}
    </span>
    {{ pageHeading }}
  </h1>

  {% set currentlyPregnant %}
    {{ input({
      name: "event[medicalInformation][pregnancyAndBreastfeeding][currentlyPregnantDetails]",
      value: event.medicalInformation.pregnancyAndBreastfeeding.currentlyPregnantDetails,
      label: {
        text: "Approximate due date"
      },
      classes: "nhsuk-u-width-two-thirds",
      hint: {
        text: "For example, "  ~ (now() | add(3, "months") | formatDate("MMMM YYYY"))
      }
    } ) }}
  {% endset %}

  {% set recentlyPregnant %}
    {{ input({
      name: "event[medicalInformation][pregnancyAndBreastfeeding][recentlyPregnantDetails]",
      value: event.medicalInformation.pregnancyAndBreastfeeding.recentlyPregnantDetails,
      label: {
        text: "Approximate date pregnancy ended"
      },
      classes: "nhsuk-u-width-two-thirds",
      hint: {
        text: "For example, " ~ (now() | remove(2, "months") | formatDate("MMMM YYYY"))
      }
    } ) }}
  {% endset %}

  {% set currentlyBreastfeeding %}
    {{ input({
      name: "event[medicalInformation][pregnancyAndBreastfeeding][currentlyBreastfeedingDuration]",
      value: event.medicalInformation.pregnancyAndBreastfeeding.currentlyBreastfeedingDuration,
      label: {
        text: "Approximate date started"
      },
      classes: "nhsuk-u-width-two-thirds",
      hint: {
        text: "For example, since " ~ (now() | remove(2, "months") | formatDate("MMMM YYYY"))
      }
    } ) }}
  {% endset %}

  {% set recentlyBreastfeeding %}
    {{ input({
      name: "event[medicalInformation][pregnancyAndBreastfeeding][recentlyBreastfeedingDuration]",
      value: event.medicalInformation.pregnancyAndBreastfeeding.recentlyBreastfeedingDuration,
      label: {
        text: "Approximate date stopped"
      },
      classes: "nhsuk-u-width-two-thirds",
      hint: {
        text: "For example, " ~ (now() | remove(3, "months") | formatDate("MMMM YYYY"))
      }
    } ) }}
  {% endset %}

  {{ radios({
    name: "event[medicalInformation][pregnancyAndBreastfeeding][pregnancyStatus]",
    value: event.medicalInformation.pregnancyAndBreastfeeding.pregnancyStatus,
    fieldset: {
      legend: {
        text: "Is " + (participant | getFullName) + " pregnant?",
        classes: "nhsuk-fieldset__legend--m",
        isPageHeading: false
      }
    },
    items: [
    {
      value: "yes",
      text: "Yes",
      conditional: {
        html: currentlyPregnant
      }
    },
    {
      value: "noButRecently",
      text: "No, but has been recently",
      conditional: {
        html: recentlyPregnant
      }
    },
    {
      divider: "or"
    },
    {
      value: "noNotPregnant",
      text: "No",
      conditional: {
        html: notPregnant
      }
    }
  ]
  } ) }}

  {{ radios({
    name: "event[medicalInformation][pregnancyAndBreastfeeding][breastfeedingStatus]",
    value: event.medicalInformation.pregnancyAndBreastfeeding.breastfeedingStatus,
     fieldset: {
      legend: {
        text: "Are they currently breastfeeding?",
        classes: "nhsuk-fieldset__legend--m",
        isPageHeading: false
      }
    },
    items: [
    {
      value: "yes",
      text: "Yes",
      conditional: {
        html: currentlyBreastfeeding
      }
    },
    {
      value: "recentlyStopped",
      text: "No, but stopped recently",
      conditional: {
        html: recentlyBreastfeeding
      }
    },
    {
      divider: "or"
    },
    {
      value: "no",
      text: "No",
      conditional: {
        html: notBreastfeeding
      }
    }
  ]
  } ) }}

  {{ button({
    text: "Continue"
  }) }}

  {% include "screening-cannot-proceed-link.njk" %}

{% endblock %}

