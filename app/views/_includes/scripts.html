<script src="/main.js"></script>

<!-- Add any custom scripts -->
{% if currentPage.indexOf("/prototype-admin/") === -1 %}
  <script src="/custom-elements/is-sticky.js"></script>
  <script src="/button-menu.js"></script>
  <script src="/modal.js"></script>
  <script src="/scroll-to-section.js"></script>
  <script src="/expanded-state-tracker.js"></script>
  <script src="/expandable-sections.js"></script>
  <script src="/stepper-input.js"></script>

  {% if data.settings.reading.showPacsViewer | falsify %}
    <script src="/mammogram-viewer.js"></script>
  {% endif %}

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Find the clear data link and add click handler
      const $resetLink = document.querySelector('a[data-reset-session]')
      if ($resetLink) {
        $resetLink.addEventListener('click', () => {
          // Clear expanded states before navigating
          if (window.clearAllExpandedStates) {
            window.clearAllExpandedStates()
            console.log('Cleared expanded states before data clear')
          }
        })
      }
    })
  </script>
{% endif %}
