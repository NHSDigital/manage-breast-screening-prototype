{# app/views/_includes/breast-diagram.njk #}

{#
  Reusable breast diagram SVG component

  Set these variables before including if you want to customise:
  - showSideLabels (boolean, default true) - whether to show "Right"/"Left" labels
  - diagramId (string, default "breastSvg") - ID for the SVG element
  - containerId (string, default "diagramContainer") - ID for the container
#}

{% set showSideLabels = showSideLabels if showSideLabels is defined else true %}
{% set diagramId = diagramId or "breastSvg" %}
{% set containerId = containerId or "diagramContainer" %}

{% if showSideLabels %}
<div class="breast-features__side-labels">
  <span>Right</span>
  <span>Left</span>
</div>
{% endif %}

<div class="breast-features__diagram" id="{{ containerId }}">
  <svg class="breast-features__svg" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg" id="{{ diagramId }}">
    <!-- Right breast outline -->
    <path d="M2.02 179.9L58.29 96.07C100.05 103.73 122.15 115.14 122.15 179.9C122.15 244.66 166.47 291.54 167.01 292.25C178.07 305.16 229.71 345.98 300.64 321.87C371.57 297.76 389.35 216.48 389.35 179.9" stroke="black" stroke-width="3" fill="none"/>

    <!-- Right nipple -->
    <circle cx="253.63" cy="199.32" r="20.86" stroke="black" stroke-width="3" fill="none"/>

    <!-- Left breast outline -->
    <path d="M797.98 180.4L741.71 96.57C699.95 104.23 677.85 115.64 677.85 180.4C677.85 245.16 633.53 292.04 632.99 292.75C621.93 305.66 570.29 346.48 499.36 322.37C428.43 298.26 410.65 216.98 410.65 180.4" stroke="black" stroke-width="3" fill="none"/>

    <!-- Left nipple -->
    <circle cx="546.37" cy="199.82" r="20.86" stroke="black" stroke-width="3" fill="none"/>

    <!-- Anatomical regions with borders (initially hidden) -->
    <style>
      .breast-features__regions {
        opacity: 0;
        pointer-events: all;
      }
      .breast-features__regions--visible {
        opacity: 1;
      }
      .breast-features__region[data-side="right"] {
        stroke: red;
        stroke-width: 2;
        fill: rgba(255,0,0,0.1);
      }
      .breast-features__region[data-side="left"] {
        stroke: red;
        stroke-width: 2;
        fill: rgba(255,0,0,0.1);
      }
      .breast-features__region[data-side="center"] {
        stroke: green;
        stroke-width: 2;
        fill: rgba(0,255,0,0.1);
      }
    </style>
    <g class="breast-features__regions" id="anatomical-regions">
      <!-- Right axilla -->
      <polygon class="breast-features__region" data-region="axilla" data-side="right" data-center-x="61.5" data-center-y="89.5"
          points="2.02,40.6 121.06,40.6 121.06,138.5 2.02,138.5"/>

      <!-- Upper regions -->
      <polygon class="breast-features__region" data-region="upper outer" data-side="right" data-center-x="171.5" data-center-y="139.5"
          points="141.23,89.0 201.77,99.1 186.66,169.7 161.41,174.7 141.23,169.7"/>
      <polygon class="breast-features__region" data-region="upper central" data-side="right" data-center-x="247.2" data-center-y="134.5"
          points="201.77,99.1 292.56,109.2 277.45,169.7 231.98,174.7 186.66,169.7"/>
      <polygon class="breast-features__region" data-region="upper inner" data-side="right" data-center-x="332.8" data-center-y="139.5"
          points="292.56,109.2 388.59,134.5 368.41,169.7 322.94,174.7 277.45,169.7"/>

      <!-- Middle regions -->
      <polygon class="breast-features__region" data-region="lateral to nipple" data-side="right" data-center-x="181.6" data-center-y="199.3"
          points="141.23,169.7 196.88,174.7 196.88,224.7 181.59,229.7 141.23,219.6"/>
      <polygon class="breast-features__region" data-region="central" data-side="right" data-center-x="253.6" data-center-y="199.3"
          points="196.88,174.7 307.67,174.7 307.67,224.7 196.88,224.7"/>
      <polygon class="breast-features__region" data-region="medial to nipple" data-side="right" data-center-x="332.8" data-center-y="199.3"
          points="307.67,174.7 368.41,169.7 368.41,224.7 307.67,224.7"/>

      <!-- Lower regions -->
      <polygon class="breast-features__region" data-region="lower lateral" data-side="right" data-center-x="166.4" data-center-y="258.4"
          points="141.23,219.6 196.88,224.7 206.99,285.5 181.59,305.9 141.23,290.5 121.06,258.4"/>
      <polygon class="breast-features__region" data-region="lower outer" data-side="right" data-center-x="221.8" data-center-y="263.4"
          points="196.88,224.7 277.45,224.7 282.45,285.5 252.12,305.9 206.99,285.5"/>
      <polygon class="breast-features__region" data-region="lower central" data-side="right" data-center-x="287.4" data-center-y="263.4"
          points="277.45,224.7 342.99,224.7 342.99,285.5 317.69,305.9 282.45,285.5"/>
      <polygon class="breast-features__region" data-region="lower inner" data-side="right" data-center-x="358.0" data-center-y="258.4"
          points="342.99,224.7 368.41,224.7 388.59,258.4 388.59,285.5 342.99,285.5"/>
      <polygon class="breast-features__region" data-region="inframammary fold" data-side="right" data-center-x="252.1" data-center-y="321.2"
          points="121.06,311.1 181.59,305.9 252.12,305.9 317.69,305.9 388.59,311.1 388.59,336.4 2.02,336.4 2.02,321.2"/>
      <polygon class="breast-features__region" data-region="upper chest" data-side="right" data-center-x="252.1" data-center-y="63.8"
          points="2.02,40.6 399.48,40.6 388.59,89.0 292.56,83.9 201.77,79.0 141.23,73.9 2.02,79.0"/>
      <polygon class="breast-features__region" data-region="lateral chest wall" data-side="right" data-center-x="30.3" data-center-y="238.6"
          points="2.02,159.7 2.02,351.4 121.06,311.1 141.23,290.5 121.06,258.4 141.23,219.6 141.23,169.7 50.44,169.7"/>

      <!-- LEFT breast regions -->
      <!-- Left axilla -->
      <polygon class="breast-features__region" data-region="axilla" data-side="left" data-center-x="738.5" data-center-y="89.5"
          points="678.94,40.6 797.98,40.6 797.98,138.5 678.94,138.5"/>

      <!-- Upper regions -->
      <polygon class="breast-features__region" data-region="upper outer" data-side="left" data-center-x="628.5" data-center-y="139.5"
          points="658.77,169.7 638.59,174.7 613.34,169.7 598.23,99.1 658.77,89.0"/>
      <polygon class="breast-features__region" data-region="upper central" data-side="left" data-center-x="552.8" data-center-y="134.5"
          points="613.34,169.7 568.02,174.7 522.55,169.7 507.44,109.2 598.23,99.1"/>
      <polygon class="breast-features__region" data-region="upper inner" data-side="left" data-center-x="467.2" data-center-y="139.5"
          points="522.55,169.7 477.06,174.7 431.59,169.7 411.41,134.5 507.44,109.2"/>

      <!-- Middle regions -->
      <polygon class="breast-features__region" data-region="lateral to nipple" data-side="left" data-center-x="618.4" data-center-y="199.3"
          points="658.77,169.7 658.77,219.6 618.41,229.7 603.12,224.7 603.12,174.7"/>
      <polygon class="breast-features__region" data-region="central" data-side="left" data-center-x="546.4" data-center-y="199.3"
          points="603.12,174.7 492.33,174.7 492.33,224.7 603.12,224.7"/>
      <polygon class="breast-features__region" data-region="medial to nipple" data-side="left" data-center-x="467.2" data-center-y="199.3"
          points="492.33,174.7 431.59,169.7 431.59,224.7 492.33,224.7"/>

      <!-- Lower regions -->
      <polygon class="breast-features__region" data-region="lower lateral" data-side="left" data-center-x="633.6" data-center-y="258.4"
          points="658.77,219.6 678.94,258.4 658.77,290.5 618.41,305.9 593.01,285.5 603.12,224.7"/>
      <polygon class="breast-features__region" data-region="lower outer" data-side="left" data-center-x="578.2" data-center-y="263.4"
          points="603.12,224.7 547.88,224.7 517.55,285.5 547.88,305.9 593.01,285.5"/>
      <polygon class="breast-features__region" data-region="lower central" data-side="left" data-center-x="512.6" data-center-y="263.4"
          points="547.88,224.7 457.01,224.7 457.01,285.5 482.31,305.9 517.55,285.5"/>
      <polygon class="breast-features__region" data-region="lower inner" data-side="left" data-center-x="442.0" data-center-y="258.4"
          points="457.01,224.7 431.59,224.7 411.41,258.4 411.41,285.5 457.01,285.5"/>
      <polygon class="breast-features__region" data-region="inframammary fold" data-side="left" data-center-x="547.9" data-center-y="321.2"
          points="411.41,311.1 457.01,305.9 547.88,305.9 618.41,305.9 678.94,311.1 797.98,321.2 797.98,336.4 411.41,336.4"/>
      <polygon class="breast-features__region" data-region="upper chest" data-side="left" data-center-x="547.9" data-center-y="63.8"
          points="399.48,40.6 797.98,40.6 797.98,79.0 658.77,73.9 598.23,79.0 507.44,83.9 411.41,89.0 399.48,83.9"/>
      <polygon class="breast-features__region" data-region="lateral chest wall" data-side="left" data-center-x="769.7" data-center-y="238.6"
          points="797.98,159.7 797.98,351.4 678.94,311.1 658.77,290.5 678.94,258.4 658.77,219.6 658.77,169.7 749.56,169.7"/>

      <!-- CENTER regions -->
      <polygon class="breast-features__region" data-region="midline" data-side="center" data-center-x="399.5" data-center-y="199.8"
          points="388.59,134.5 411.41,134.5 411.41,280.9 388.59,280.9"/>
      <polygon class="breast-features__region" data-region="lower sternum" data-side="center" data-center-x="399.5" data-center-y="321.2"
          points="388.59,280.9 411.41,280.9 411.41,351.4 388.59,351.4"/>
    </g>

    <!-- Markers will be added here dynamically -->
  </svg>
</div>